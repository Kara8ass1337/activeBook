{"version":3,"sources":["webpack:///webpack/bootstrap 82b688cd2d4397f07d84","webpack:///./js/custom/frontend/ConstsDOM.js","webpack:///./js/custom/frontend/PopoverControl.js","webpack:///./js/custom/frontend/js.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AChEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;ACpEA;AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,OAAO;AAChC,kCAAkC,OAAO;AACzC,wCAAwC,OAAO;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA,yBAAyB;AACzB,mCAAmC,OAAO;AAC1C,wCAAwC,OAAO;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA,yBAAyB;AACzB,yCAAyC,OAAO;AAChD,8CAA8C,OAAO;AACrD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;;AAEA;AACA,yBAAyB;AACzB,wCAAwC,OAAO;AAC/C,kCAAkC,OAAO;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,sBAAsB,2CAA2C;;AAEjE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0BAA0B,iEAAiE;AAC3F,SAAS;AACT;;AAEA,0BAA0B,+DAA+D;AACzF;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,C;;;;;;;;;;;;ACtQA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,6FAA6F;AAC7F;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,8EAA4B,mDAAmD;AAC/E,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,yBAAyB,oBAAoB;AAC7C;;AAEA;AACA,6BAA6B,iBAAiB;AAC9C,aAAa;;AAEb;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,sBAAsB;AACtB,kCAAkC;AAClC;AACA,gDAAgD;AAChD;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAwB,yBAAyB;AACjD,KAAK;AACL,CAAC,E","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 82b688cd2d4397f07d84","/**\r\n * геттеры для селекторов\r\n * на странице\r\n */\r\n\r\nexport default class ConstsDOM {\r\n    constructor () {\r\n\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {{string}}\r\n     *\r\n     * основные селекторы DOM-элементов страницы\r\n     */\r\n    static get () {\r\n        return {\r\n            text: '.text',\r\n            tableOfContents: '.table-of-contents',\r\n            menu: '.menu',\r\n            leftSide: '.left-side',\r\n            rightSide: '.right-side',\r\n            action: '.action',\r\n            objImgWrapper: '.obj-img__wrapper',\r\n            page: '.page'\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {{string}}\r\n     *\r\n     * js-хуки для элементов меню\r\n     */\r\n    static getMenu () {\r\n        return {\r\n            bookmark: '.js-bookmark',\r\n            pagePrev: '.js-page-prev',\r\n            pageNext: '.js-page-next',\r\n            pageNumber: '.js-page-number',\r\n            volumeSlider: '.js-range-slider',\r\n            fontSizeDown: '.js-font-size-down',\r\n            fontSizeUp: '.js-font-size-up'\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {{jquery}}\r\n     *\r\n     * js-хуки для элементов поповера\r\n     */\r\n    static getPopover () {\r\n        return {\r\n            popover: '.add-settings',\r\n            popoverBottom: '.add-settings__bottom',\r\n            triggerButton: '.obj-img__wrapper',\r\n            menu: '.menu',\r\n            tableOfContentsShow: '.js-table-of-contents-show',\r\n            vibrationToggle: '.js-vibration-toggle',\r\n            vibrationOption: '.js-vibration-option',\r\n            themeOption: '.js-theme-option',\r\n            lineHeightMinus: '.js-line-height-minus',\r\n            lineHeightPlus: '.js-line-height-plus',\r\n            lineHeightVal: '.js-line-height-val'\r\n        }\r\n    }\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/custom/frontend/ConstsDOM.js\n// module id = 0\n// module chunks = 0","/**\r\n * управляем отображением поповеров\r\n */\r\nimport ConstsDom from './ConstsDOM';\r\n\r\n/**\r\n * инициализатор для поповера\r\n */\r\nexport default class PopoverControl {\r\n    /**\r\n     *\r\n     * @param selectors {object} jquery;\r\n     * @param selectors.$popover {object} jquery;\r\n     * @param selectors.$triggerButton {object} jquery;\r\n     */\r\n    constructor (selectors) {\r\n        this.constDomPopover = ConstsDom.getPopover();\r\n        this.$popover = $(selectors.$popover);\r\n        this.$triggerButton = $(selectors.$triggerButton);\r\n        this.init();\r\n    }\r\n\r\n    /**\r\n     *\r\n     */\r\n    init () {\r\n        let self = this;\r\n        let $triggerButton = self.$triggerButton;\r\n        let $popover = self.$popover;\r\n\r\n        $triggerButton.on('click', function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            /**\r\n             * скрываем все поповеры,\r\n             * кроме актуальной\r\n             */\r\n            PopoverControl._closeAllOtherPopovers({\r\n                $popovers: $(self.constDomPopover.popover + '.active'),\r\n                $popoverActual: $popover\r\n            });\r\n\r\n            /**\r\n             * деактивируем все триггер-кнопки,\r\n             * кроме той, по которой щас кликнули\r\n             */\r\n            PopoverControl._closeAllOtherTriggerButtons({\r\n                $triggerButtons: $(self.constDomPopover.triggerButton + '.active'),\r\n                $triggerButtonActual: $triggerButton\r\n            });\r\n\r\n            $popover.toggleClass('active');\r\n            $triggerButton.toggleClass('active');\r\n\r\n            /**\r\n             * позиционируем поповер\r\n             */\r\n            self._positioning();\r\n\r\n            /**\r\n             * навешиваем дополнительные события\r\n             * (для скрытия попапа и т.д.)\r\n             */\r\n            self._additionalEvents();\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param selectors {object}\r\n     * @param selectors.$popovers {object} jquery\r\n     * @param selectors.$popoverActual {object} jquery\r\n     * @private\r\n     */\r\n    static _closeAllOtherPopovers (selectors) {\r\n        let $popovers = selectors.$popovers;\r\n        let $popoverActual = selectors.$popoverActual;\r\n\r\n        $popovers.each(function () {\r\n            if ($(this)[0] !== $popoverActual[0]) $(this).removeClass('active');\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param selectors {object}\r\n     * @param selectors.$triggerButtons {object} jquery\r\n     * @param selectors.$triggerButtonActual {object} jquery\r\n     * @private\r\n     */\r\n    static _closeAllOtherTriggerButtons (selectors) {\r\n        let $triggerButtons = selectors.$triggerButtons;\r\n        let $triggerButtonActual = selectors.$triggerButtonActual;\r\n\r\n        $triggerButtons.each(function () {\r\n            if ($(this)[0] !== $triggerButtonActual[0]) $(this).removeClass('active');\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _additionalEvents () {\r\n        let self = this;\r\n        let $popover = self.$popover;\r\n        let $triggerButton = self.$triggerButton;\r\n\r\n        /**\r\n         * убираем всплытие события клик у поповера,\r\n         * чтобы он не закрывался при нём\r\n         */\r\n        setTimeout(function () {\r\n            $popover.on('click', function (e) {\r\n                e.stopPropagation();\r\n            });\r\n        }, 0);\r\n\r\n        /**\r\n         * клик в любом месте документа,\r\n         * кроме самого этого элемента\r\n         * скроет поповер\r\n         */\r\n        setTimeout(function () {\r\n            $(document).one('click', function () {\r\n                PopoverControl.close({\r\n                    $popover: $popover,\r\n                    $triggerButton: $triggerButton\r\n                });\r\n            });\r\n        }, 0);\r\n    }\r\n\r\n    /**\r\n     * @param selectors {object}\r\n     * @param selectors.$triggerButton {object} jquery\r\n     * @param selectors.$popover {object} jquery\r\n     */\r\n    static close (selectors) {\r\n        let $popover = selectors.$popover;\r\n        let $triggerButton = selectors.$triggerButton;\r\n\r\n        $popover.removeClass('active');\r\n        $popover.off('click');\r\n        $triggerButton.removeClass('active');\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n     _positioning () {\r\n        let self = this;\r\n        let $popover = self.$popover;\r\n\r\n        /**\r\n         * сбрасываем все изменения,\r\n         * чтобы позиционирование сработало нормально.\r\n         * скрываем элемент на время позиционирования.\r\n         *\r\n         */\r\n        self._positioningBefore();\r\n\r\n        /**\r\n         *\r\n         * получаем координаты всех нужных объектов\r\n         */\r\n        let coords = self._getCoords();\r\n\r\n        /**\r\n         *\r\n         * transform работает гораздо быстрее всяких margin,\r\n         * потому что браузер не перерисовывает DOM-дерево\r\n         */\r\n\r\n        let top = Math.abs(parseInt(coords.$popoverBottom.bottom - coords.$popover.top));\r\n\r\n        $popover.css({'transform' : 'translateY(-' + top + 'px)'});\r\n\r\n        /**\r\n         * если правая точка поповера заходит\r\n         * на край блока с текстом, двигаем его назад + небольшой отступ.\r\n         * аналогично с левой точкой\r\n         */\r\n        if (coords.$popover.right >= coords.$menu.right) {\r\n            let right = Math.abs(parseInt(coords.$popover.right - coords.$menu.right + 10 /*padding-right*/));\r\n\r\n            $popover.css({'transform' : 'translate(-' + right + 'px, ' + '-' + top + 'px)'});\r\n        } else if (coords.$popover.left <= coords.$menu.left) {\r\n            let left = Math.abs(parseInt(coords.$popover.left - coords.$menu.left + 10 /*padding-left*/));\r\n\r\n            $popover.css({'transform' : 'translate(' + left + 'px, ' + '-' + top + 'px)'});\r\n        }\r\n\r\n        /**\r\n         *\r\n         * после того как поповер был сдвинут,\r\n         * координаты его нижней части были измененеы,\r\n         * их нужно актуализировать, ещё раз получив их\r\n         */\r\n\r\n        let $popoverBottom = $popover.find(self.constDomPopover.popoverBottom);\r\n\r\n        coords.$popoverBottom = $popoverBottom[0].getBoundingClientRect();\r\n\r\n        /**\r\n         * зеркалим нижнюю часть поповера,\r\n         * если триггер-кнопка правее его\r\n         */\r\n\r\n        if ((coords.$popoverBottom.left - parseInt($popoverBottom.css('left'))) < coords.$triggerButton.left) {\r\n            $popoverBottom.addClass('revert');\r\n        }\r\n\r\n        /**\r\n         * когда позиционирование было завершено,\r\n         * проявляем элемент\r\n         */\r\n        self._positioningAfter();\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @private\r\n     */\r\n    _positioningBefore () {\r\n        let self = this;\r\n        let $popover = self.$popover;\r\n\r\n        $popover.css({\r\n            'transform' : 'translate(0, 0)',\r\n            'opacity' : '0'\r\n        });\r\n\r\n        let $popoverBottom = $popover.find(self.constDomPopover.popoverBottom);\r\n        $popoverBottom.removeClass('revert');\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _getCoords () {\r\n        let self = this;\r\n        let $popover = self.$popover;\r\n        let $triggerButton = self.$triggerButton;\r\n\r\n        return {\r\n            $popover: $popover[0].getBoundingClientRect(),\r\n            $triggerButton: $triggerButton[0].getBoundingClientRect(),\r\n            $menu: $(self.constDomPopover.menu)[0].getBoundingClientRect(),\r\n            $popoverBottom: $popover.find(self.constDomPopover.popoverBottom)[0].getBoundingClientRect()\r\n        };\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @private\r\n     */\r\n    _positioningAfter () {\r\n        this.$popover.css({\r\n            'opacity' : ''\r\n        });\r\n    }\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/custom/frontend/PopoverControl.js\n// module id = 1\n// module chunks = 0","import ConstsDom from './ConstsDOM';\r\nimport PopoverControl from './PopoverControl';\r\n\r\n$(window).load(function () {\r\n    const constsDom = ConstsDom.get();\r\n    const constsDomMenu = ConstsDom.getMenu();\r\n    const constsDomPopover = ConstsDom.getPopover();\r\n\r\n    //customScrollBar\r\n    $('.js-scrollable-item').mCustomScrollbar({\r\n        theme: 'activeBook',\r\n        autoDraggerLength: true,\r\n        mouseWheel: {scrollAmount: 75},\r\n        scrollbarPosition: 'outside'\r\n    });\r\n\r\n    //стрелки, pageUp, pageDown, Home, End передаются в mCustomScrollBar\r\n    //todo: влево/вправо в него не передавать, а в нём самом запретить их обработку\r\n    /**\r\n     * из самого .mCustomScrollBox элемента\r\n     * событие keydown не всплывает,\r\n     * но триггер события на него (```$scrollableItem.find('> .mCustomScrollBox').trigger(e);```)\r\n     * всплывёт. для этого случая и стоит проверка на то,\r\n     * что активный элемент - это .mCustomScrollBox.\r\n     * иначе будет бесконечный цикл и ошибка в итоге\r\n     */\r\n    $(document).on('keydown', function (e) {\r\n        if (e.which < 33 || e.which > 40) return;\r\n\r\n        //todo: trigger click заменить на вызов функции перехода\r\n        if (e.which === 37) {\r\n            $('.js-page-prev').trigger('click');\r\n            return;\r\n        }\r\n\r\n        //todo: trigger click заменить на вызов функции перехода\r\n        if (e.which === 39) {\r\n            $('.js-page-next').trigger('click');\r\n            return;\r\n        }\r\n\r\n        let $scrollableItem = $('.js-scrollable-item:visible');\r\n\r\n        if ($scrollableItem.find('> .mCustomScrollBox')[0] === document.activeElement) return;\r\n\r\n        $scrollableItem.find('> .mCustomScrollBox').focus();\r\n        $scrollableItem.find('> .mCustomScrollBox').trigger(e);\r\n    });\r\n\r\n    //ionRangeSlider\r\n    $('.js-range-slider').ionRangeSlider({\r\n        min: 0,\r\n        max: 100,\r\n        from: 50,\r\n        hide_min_max: true,\r\n        hide_from_to: true\r\n    });\r\n\r\n    //отображаем доп. меню для элементов с поповером\r\n    $('.menu__item').has(constsDomPopover.popover).each(function (index, popoverParent) {\r\n        let $popover = $(popoverParent).find(constsDomPopover.popover);\r\n        let $triggerButton = $(popoverParent).find(constsDomPopover.triggerButton);\r\n\r\n        new PopoverControl({$popover: $popover, $triggerButton: $triggerButton});\r\n    });\r\n\r\n    //переключалка для вибрации\r\n    //todo: если включаем - то давать короткую вибрацию\r\n    $(constsDomPopover.vibrationOption).on('click', function () {\r\n        let $parent = $(constsDomPopover.vibrationToggle);\r\n\r\n        if (!$(this).hasClass('active')) {\r\n            $parent.find('.active').removeClass('active');\r\n            $(this).addClass('active');\r\n        }\r\n    });\r\n\r\n    //переключалка темы оформления\r\n    $(constsDomPopover.themeOption).on('click', function () {\r\n        let $parent = $(this).closest('.theme-options');\r\n        let $page = $(constsDom.page);\r\n\r\n        if (!$(this).hasClass('active')) {\r\n            let theme = $(this).attr('data-theme-name');\r\n            let themeForRemove = $page.attr('class').match(/theme-\\w+/) || [''];\r\n\r\n            //todo: косяк с dark-blue, переписать регулярку\r\n\r\n            $parent.find('.active').removeClass('active');\r\n            $(this).addClass('active');\r\n            $page.removeClass(themeForRemove[0]).addClass('theme-' + theme);\r\n        }\r\n    });\r\n\r\n    //оглавление\r\n    $(constsDomPopover.tableOfContentsShow).on('click', function () {\r\n        $(constsDom.text).hide();\r\n        $(constsDom.tableOfContents).show();\r\n        PopoverControl.close({\r\n            $triggerButton: $(this).closest('.menu__item'),\r\n            $popover: $(this).closest(constsDomPopover.popover)\r\n        });\r\n    });\r\n\r\n    $('.js-table-of-contents-close').on('click', function () {\r\n        $(constsDom.tableOfContents).hide();\r\n        $(constsDom.text).show();\r\n    });\r\n\r\n    //клик по элементу оглавления (главе)\r\n    $('.table-of-contents__item').on('click', function () {\r\n        let pageNumber = $.trim($(this).find('.table-of-contents__item__page').text());\r\n\r\n        //todo: потом заменить на настоящий переход на страницу\r\n        console.log(pageNumber);\r\n    });\r\n\r\n    //меняем межстрочный интервал\r\n    //todo: вынести в отдельный метод\r\n    $('.js-line-height-minus').on('click', function () {\r\n        let $val = $('.js-line-height-val');\r\n        let currentVal = parseInt($val.text());\r\n        let newVal = currentVal - 25;\r\n\r\n        if (currentVal <= 75) return;\r\n\r\n        $val.text(newVal + '%');\r\n\r\n        let classForRemove = $(constsDom.text).attr('class').match(/line-height-\\d*/) || [''];\r\n\r\n        $(constsDom.text).removeClass(classForRemove[0]).addClass('line-height-' + newVal);\r\n        $(constsDom.text).attr('data-line-height', newVal);\r\n    });\r\n\r\n    $('.js-line-height-plus').on('click', function () {\r\n        let $val = $('.js-line-height-val');\r\n        let currentVal = parseInt($val.text());\r\n        let newVal = currentVal + 25;\r\n\r\n        if (currentVal >= 150) return;\r\n\r\n        $val.text(newVal + '%');\r\n\r\n        let classForRemove = $(constsDom.text).attr('class').match(/line-height-\\d*/) || [''];\r\n\r\n        $(constsDom.text).removeClass(classForRemove[0]).addClass('line-height-' + newVal);\r\n        $(constsDom.text).attr('data-line-height', newVal);\r\n    });\r\n\r\n    //меняем страницу\r\n    //todo: вынести в отдельную функцию переход на страницу\r\n    $('.js-page-next').on('click', function () {\r\n        let $val = $('.js-page-number');\r\n        let currentVal = parseInt($val.attr('data-page-number'));\r\n        let pagesLength = parseInt($val.attr('data-pages-length'));\r\n        let newVal = currentVal + 1;\r\n\r\n        if (currentVal >= pagesLength) newVal = currentVal;\r\n\r\n        location.href = '../pages/page_' + newVal + '.html';\r\n    });\r\n\r\n    $('.js-page-prev').on('click', function () {\r\n        let $val = $('.js-page-number');\r\n        let currentVal = parseInt($val.attr('data-page-number'));\r\n        let newVal = currentVal - 1;\r\n\r\n        if (currentVal <= 1) newVal = currentVal;\r\n\r\n        location.href = '../pages/page_' + newVal + '.html';\r\n    });\r\n\r\n    $('.js-page-number').find('input').on('blur', function () {\r\n        let $val = $('.js-page-number');\r\n        let currentVal = parseInt($val.attr('data-page-number'));\r\n        let pagesLength = parseInt($val.attr('data-pages-length'));\r\n        let pattern = $val.find('input').attr('pattern');\r\n        let newVal = $(this).val();\r\n\r\n        if (newVal.length === 0) return;\r\n\r\n        //only numbers allows\r\n        if (new RegExp('^' + pattern + '+$').test(newVal) === false) {\r\n            $(this).css({'background': 'red'});\r\n            $(this).val('');\r\n\r\n            $(this).one('keydown', function () {\r\n                $(this).css({'background': ''});\r\n            });\r\n\r\n            return;\r\n        }\r\n\r\n        newVal = Math.abs(parseInt(newVal));\r\n\r\n        if (newVal <= 1) {\r\n            newVal = 1;\r\n        } else if (newVal >= pagesLength) {\r\n            newVal = pagesLength;\r\n        }\r\n\r\n        if (newVal === currentVal) return;\r\n\r\n        location.href = '../pages/page_' + newVal + '.html';\r\n    });\r\n\r\n    //font-size control\r\n    /**\r\n     * @param params {object}\r\n     * @param params.newFontSize {string}\r\n     * */\r\n    const changeFontSize = function (params = {}) {\r\n        let newFontSize = params.newFontSize;\r\n\r\n        if (!newFontSize) {\r\n            return false;\r\n        }\r\n\r\n        let text = $(constsDom.text);\r\n        let classNameForRemove = text.attr('data-font-size');\r\n\r\n        text.removeClass('font-size-' + classNameForRemove).addClass('font-size-' + newFontSize);\r\n        text.attr('data-font-size', newFontSize);\r\n    };\r\n\r\n    $('.js-font-size-down').add('.js-font-size-up').on('click', function () {\r\n        let fontSizes = ['75', '100', '125', '150'];\r\n        let text = $(constsDom.text);\r\n        let fontSizeNow = text.attr('data-font-size');\r\n        let fontSizeNowIndex = $.inArray(fontSizeNow, fontSizes);\r\n        let newFontSize = fontSizes[fontSizeNowIndex - 1];\r\n\r\n        if ($(this).hasClass('js-font-size-up')) {\r\n            newFontSize = fontSizes[fontSizeNowIndex + 1];\r\n        }\r\n\r\n        if (!newFontSize) {\r\n            return false;\r\n        }\r\n\r\n        changeFontSize({newFontSize: newFontSize});\r\n    });\r\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/custom/frontend/js.js\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}